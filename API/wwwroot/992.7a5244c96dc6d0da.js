"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[992],{1992:(le,v,m)=>{m.r(v),m.d(v,{MembersModule:()=>ae});var c=m(6814),b=m(2423),e=m(9468),p=m(3613),l=m(95),T=m(7012),x=m(7282),A=m(6241);function y(r,s){if(1&r&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&r){const o=s.$implicit;e.Q6J("value",o.value),e.xp6(1),e.hij(" ",o.display," ")}}function U(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"div",5)(1,"form",6,7),e.NdJ("ngSubmit",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.loadMembers())}),e.TgZ(3,"div",8)(4,"label",9),e._uU(5,"Age from:"),e.qZA(),e.TgZ(6,"input",10),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.userParams.minAge=n)}),e.qZA()(),e.TgZ(7,"div",8)(8,"label",9),e._uU(9,"Age to:"),e.qZA(),e.TgZ(10,"input",11),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.userParams.maxAge=n)}),e.qZA()(),e.TgZ(11,"div",12)(12,"label",13),e._uU(13,"Show: "),e.qZA(),e.TgZ(14,"select",14),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.userParams.gender=n)}),e.YNc(15,y,2,2,"option",15),e.qZA()(),e.TgZ(16,"button",16),e._uU(17,"Apply Filter"),e.qZA(),e.TgZ(18,"button",17),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.resetFilter())}),e._uU(19,"Reset Filter"),e.qZA(),e.TgZ(20,"div",18)(21,"div",19)(22,"button",20),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.userParams.orderBy=n)})("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.loadMembers())}),e._uU(23,"Last Active"),e.qZA(),e.TgZ(24,"button",21),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.userParams.orderBy=n)})("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.loadMembers())}),e._uU(25,"Newest member"),e.qZA()()()()()}if(2&r){const o=e.oxw();e.xp6(6),e.Q6J("ngModel",o.userParams.minAge),e.xp6(4),e.Q6J("ngModel",o.userParams.maxAge),e.xp6(4),e.Q6J("ngModel",o.userParams.gender),e.xp6(1),e.Q6J("ngForOf",o.genderList),e.xp6(7),e.Q6J("ngModel",o.userParams.orderBy),e.xp6(2),e.Q6J("ngModel",o.userParams.orderBy)}}function q(r,s){if(1&r&&(e.TgZ(0,"div",23),e._UZ(1,"app-member-card",24),e.qZA()),2&r){const o=s.$implicit;e.xp6(1),e.Q6J("member",o)}}function J(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"div",25)(1,"pagination",26),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.pagination.currentPage=n)})("pageChanged",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.pageChange(n))}),e.qZA()()}if(2&r){const o=e.oxw();e.xp6(1),e.Q6J("boundaryLinks",!0)("totalItems",o.pagination.totalItems)("itemsPerPage",o.pagination.itemsPerPage)("ngModel",o.pagination.currentPage)}}let P=(()=>{var r;class s{constructor(t){this.memberServices=t,this.members=[],this.genderList=[{value:"male",display:"Males"},{value:"female",display:"Females"}],this.userParams=t.getUserParams()}ngOnInit(){this.loadMembers()}loadMembers(){this.userParams&&this.userParams&&(this.memberServices.setUserParams(this.userParams),this.memberServices.getMembers(this.userParams).subscribe({next:t=>{t.result&&t.pagination&&(this.members=t.result,this.pagination=t.pagination)}}))}resetFilter(){this.userParams=this.memberServices.resetUserParams(),this.loadMembers()}pageChange(t){this.userParams&&this.userParams?.pageNumber!==t.page&&(this.userParams.pageNumber=t.page,this.memberServices.setUserParams(this.userParams),this.loadMembers())}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(p.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-member-list"]],decls:7,vars:4,consts:[[1,"text-center","mt-3"],["class","container mt-3",4,"ngIf"],[1,"row","justify-content-center"],["class","col-2",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"container","mt-3"],["autocomplete","off",1,"d-flex","mb-3","justify-content-around",3,"ngSubmit"],["form","ngForm"],[1,"d-flex","mx-2"],[1,"col-form-label"],["type","number","name","minAge",1,"form-control","ms-1",2,"width","70px",3,"ngModel","ngModelChange"],["type","number","name","maxAge",1,"form-control","ms-1",2,"width","70px",3,"ngModel","ngModelChange"],[1,"d-flex","px-2"],[1,"col-form-label","me-2"],["name","gender",1,"form-select","ms-1",2,"width","150px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","ms-1"],["type","submit",1,"btn","btn-info","ms-1",3,"click"],[1,"col"],[1,"btn-group","float-end"],["type","submit","name","orderBy","btnRadio","lastActive",1,"btn","btn-primary",3,"ngModel","ngModelChange","click"],["type","button","name","orderBy","btnRadio","created",1,"btn","btn-primary",3,"ngModel","ngModelChange","click"],[3,"value"],[1,"col-2"],[3,"member"],[1,"d-flex","justify-content-center"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","ngModel","ngModelChange","pageChanged"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2),e.qZA()(),e.YNc(3,U,26,6,"div",1),e.TgZ(4,"div",2),e.YNc(5,q,2,1,"div",3),e.qZA(),e.YNc(6,J,2,4,"div",4)),2&t&&(e.xp6(2),e.hij("Your matches - ",null==n.pagination?null:n.pagination.totalItems," found"),e.xp6(1),e.Q6J("ngIf",n.userParams),e.xp6(2),e.Q6J("ngForOf",n.members),e.xp6(1),e.Q6J("ngIf",n.pagination))},dependencies:[c.sg,c.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.On,l.F,T.Qt,x.lz,A.a]}),s})();var d=m(612),_=m(7793),g=m(2761),M=m(4693);const w=["messageForm"];function O(r,s){1&r&&(e.TgZ(0,"div"),e._uU(1," No message yet... Say hi "),e.qZA())}function S(r,s){1&r&&(e.TgZ(0,"span",22),e._uU(1,"(unread)"),e.qZA())}function F(r,s){if(1&r&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"timeago"),e.qZA()),2&r){const o=e.oxw().$implicit;e.xp6(1),e.hij("(read ",e.lcZ(2,1,o.dateRead),")")}}function N(r,s){if(1&r&&(e.TgZ(0,"li")(1,"div")(2,"span",14),e._UZ(3,"img",15),e.qZA(),e.TgZ(4,"div",16)(5,"div",17)(6,"small",18)(7,"span",19),e._uU(8),e.ALo(9,"timeago"),e.qZA(),e.YNc(10,S,2,0,"span",20),e.YNc(11,F,3,3,"span",21),e.qZA()(),e.TgZ(12,"p"),e._uU(13),e.qZA()()()()),2&r){const o=s.$implicit,t=e.oxw(2);e.xp6(3),e.s9C("src",o.senderPhotoUrl||"./assets.user.png",e.LSH),e.xp6(5),e.Oqu(e.lcZ(9,5,o.messageSent)),e.xp6(2),e.Q6J("ngIf",!o.dateRead&&o.senderUserName!==t.username),e.xp6(1),e.Q6J("ngIf",o.dateRead&&o.senderUserName!==t.username),e.xp6(2),e.Oqu(o.content)}}function Q(r,s){if(1&r&&(e.TgZ(0,"ul",11,12),e.YNc(2,N,14,7,"li",13),e.ALo(3,"async"),e.qZA()),2&r){const o=e.MAs(1),t=e.oxw();e.Q6J("scrollTop",o.scrollHeight),e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,2,t.messageService.messageThread$))}}let L=(()=>{var r;class s{constructor(t){this.messageService=t,this.messageContent=""}ngOnInit(){}sendMessage(){this.username&&this.messageService.sendMessage(this.username,this.messageContent).then(()=>{this.messageForm?.reset()})}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(M.e))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-member-messages"]],viewQuery:function(t,n){if(1&t&&e.Gf(w,5),2&t){let i;e.iGM(i=e.CRH())&&(n.messageForm=i.first)}},inputs:{username:"username"},standalone:!0,features:[e.jDz],decls:14,vars:8,consts:[[1,"card"],[1,"card-body"],[4,"ngIf"],["style","overflow: scroll; height: 500px;","class","chat",3,"scrollTop",4,"ngIf"],[1,"card-footer"],["autocomplete","off",3,"ngSubmit"],["messageForm","ngForm"],[1,"input-group"],["name","messageContent","required","","type","text","placeholder","Send a message",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"chat",2,"overflow","scroll","height","500px",3,"scrollTop"],["scrollMe",""],[4,"ngFor","ngForOf"],[1,"chat-img","float-end"],["alt","image of user",1,"rounded-circle",3,"src"],[1,"chat-body"],[1,"header"],[1,"text-muted"],[1,"fa","fa-clock-o"],["class","text-danger",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"text-danger"],[1,"text-success"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,O,2,0,"div",2),e.ALo(3,"async"),e.YNc(4,Q,4,4,"ul",3),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"div",4)(7,"form",5,6),e.NdJ("ngSubmit",function(){return n.sendMessage()}),e.TgZ(9,"div",7)(10,"input",8),e.NdJ("ngModelChange",function(a){return n.messageContent=a}),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e._uU(13,"Send"),e.qZA()()()()()()),2&t){const i=e.MAs(8);let a;e.xp6(2),e.Q6J("ngIf",0===(null==(a=e.lcZ(3,4,n.messageService.messageThread$))?null:a.length)),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,6,n.messageService.messageThread$).length>0),e.xp6(6),e.Q6J("ngModel",n.messageContent),e.xp6(2),e.Q6J("disabled",!i.valid)}},dependencies:[c.ez,c.sg,c.O5,c.Ov,g.$L,g.wr,l.u5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.On,l.F],styles:[".card[_ngcontent-%COMP%]{border:none}.chat[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.chat[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;padding-bottom:10px;border-bottom:1px dotted #B3A9A9}.rounded-circle[_ngcontent-%COMP%]{max-height:50px}"],changeDetection:0}),s})();var f=m(7783),I=m(3949);const E=["memberTabs"];function H(r,s){1&r&&(e.TgZ(0,"div",20)(1,"i",21),e._uU(2,"Online now"),e.qZA()())}function k(r,s){if(1&r&&e._UZ(0,"gallery",22),2&r){const o=e.oxw();e.Q6J("items",o.images)}}let Y=(()=>{var r;class s{constructor(t,n,i,a){this.accountService=t,this.route=n,this.messageService=i,this.presenceService=a,this.member={},this.images=[],this.messages=[],this.accountService.currentUser$.pipe().subscribe({next:u=>{u&&(this.user=u)}})}ngOnInit(){this.route.data.subscribe({next:t=>this.member=t.member}),this.route.queryParams.subscribe({next:t=>{t.tab&&this.selectTab(t.tab)}}),this.getImages()}selectTab(t){this.memberTabs&&(this.memberTabs.tabs.find(n=>n.heading===t).active=!0)}onTabActivated(t){this.activeTab=t,"Messages"===this.activeTab.heading&&this.user?this.messageService.createHubConnection(this.user,this.member.userName):this.messageService.stopHubConnection()}getImages(){if(this.member)for(const t of this.member?.photos)this.images.push(new _.vE({src:t.url,thumb:t.url}))}ngOnDestroy(){this.messageService.stopHubConnection()}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(f.B),e.Y36(b.gz),e.Y36(M.e),e.Y36(I.Q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-member-detail"]],viewQuery:function(t,n){if(1&t&&e.Gf(E,7),2&t){let i;e.iGM(i=e.CRH())&&(n.memberTabs=i.first)}},standalone:!0,features:[e.jDz],decls:57,vars:21,consts:[[1,"row"],[1,"col-4"],[1,"card"],[1,"card-img-top","img-thumbnail",3,"src","alt"],[1,"card-body"],["class","mb-2",4,"ngIf"],[1,"card-footer"],[1,"btn-group","d-flex"],[1,"btn","btn-primary"],[1,"btn","btn-success",3,"click"],[1,"col-8"],[1,"member-tabset"],["memberTabs",""],[3,"heading","selectTab"],["heading","Interests",3,"selectTab"],["heading","Photos",3,"selectTab"],["photoTab","tab"],["class","gallery",3,"items",4,"ngIf"],["heading","Messages",3,"selectTab"],[3,"username"],[1,"mb-2"],[1,"class","fa","fa-user-circle","text-success"],[1,"gallery",3,"items"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"div",4),e.YNc(5,H,3,0,"div",5),e.ALo(6,"async"),e.TgZ(7,"div")(8,"strong"),e._uU(9,"Location:"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA()(),e.TgZ(12,"div")(13,"strong"),e._uU(14,"Age:"),e.qZA(),e.TgZ(15,"p"),e._uU(16),e.qZA()(),e.TgZ(17,"div")(18,"strong"),e._uU(19,"Last active:"),e.qZA(),e.TgZ(20,"p"),e._uU(21),e.ALo(22,"timeago"),e.qZA()(),e.TgZ(23,"div")(24,"strong"),e._uU(25,"Member since:"),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.ALo(28,"date"),e.qZA()()()(),e.TgZ(29,"div",6)(30,"div",7)(31,"button",8),e._uU(32,"Like"),e.qZA(),e.TgZ(33,"button",9),e.NdJ("click",function(){return n.selectTab("Messages")}),e._uU(34,"Message"),e.qZA()()()(),e.TgZ(35,"div",10)(36,"tabset",11,12)(38,"tab",13),e.NdJ("selectTab",function(a){return n.onTabActivated(a)}),e.TgZ(39,"h4"),e._uU(40,"Description"),e.qZA(),e.TgZ(41,"p"),e._uU(42),e.qZA(),e.TgZ(43,"h4"),e._uU(44,"Locking for"),e.qZA(),e.TgZ(45,"p"),e._uU(46),e.qZA()(),e.TgZ(47,"tab",14),e.NdJ("selectTab",function(a){return n.onTabActivated(a)}),e.TgZ(48,"h4"),e._uU(49,"Interests"),e.qZA(),e.TgZ(50,"p"),e._uU(51),e.qZA()(),e.TgZ(52,"tab",15,16),e.NdJ("selectTab",function(a){return n.onTabActivated(a)}),e.YNc(54,k,1,1,"gallery",17),e.qZA(),e.TgZ(55,"tab",18),e.NdJ("selectTab",function(a){return n.onTabActivated(a)}),e._UZ(56,"app-member-messages",19),e.qZA()()()()),2&t){const i=e.MAs(53);let a;e.xp6(3),e.s9C("src",n.member.photoUrl||"./assets/user.png",e.LSH),e.s9C("alt",n.member.knownAs),e.xp6(2),e.Q6J("ngIf",null==(a=e.lcZ(6,14,n.presenceService.onlineUser$))?null:a.includes(n.member.userName)),e.xp6(6),e.AsE("",n.member.city,", ",n.member.country,""),e.xp6(5),e.Oqu(n.member.age),e.xp6(5),e.Oqu(e.lcZ(22,16,n.member.lastActive)),e.xp6(6),e.Oqu(e.xi3(28,18,n.member.created,"dd MMM yyyy")),e.xp6(11),e.MGl("heading","About ",n.member.knownAs,""),e.xp6(4),e.Oqu(n.member.introduction),e.xp6(4),e.Oqu(n.member.lockingFor),e.xp6(5),e.Oqu(n.member.interests),e.xp6(3),e.Q6J("ngIf",i.active),e.xp6(2),e.Q6J("username",n.member.userName)}},dependencies:[c.ez,c.O5,c.Ov,c.uU,d.P4,d.wW,d.AH,_.Uo,_.vY,g.$L,g.wr,L],styles:[".img-thumbnail[_ngcontent-%COMP%]{margin:25px;width:85%;height:85%}.card-body[_ngcontent-%COMP%]{padding:0 25px}.card-footer[_ngcontent-%COMP%]{padding:10px 15px;background-color:#fff;border-top:none}"]}),s})();var D=m(7398),Z=m(2051);let G=(()=>{var r;class s{constructor(t){this.bsModalRef=t,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(Z.UZ))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA()(),e.TgZ(3,"div",2)(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return n.confirm()}),e._uU(8),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return n.decline()}),e._uU(10),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(n.title),e.xp6(3),e.Oqu(n.message),e.xp6(3),e.Oqu(n.btnOkText),e.xp6(2),e.Oqu(n.btnCancelText))}}),s})(),B=(()=>{var r;class s{constructor(t){this.modalService=t}confirm(t="Confirmation",n="Are you sure you want to do this?",i="Ok",a="Cancel"){return this.bsModelRef=this.modalService.show(G,{initialState:{title:t,message:n,btnOkText:i,btnCancelText:a}}),this.bsModelRef.onHidden.pipe((0,D.U)(()=>this.bsModelRef.content.result))}}return(r=s).\u0275fac=function(t){return new(t||r)(e.LFG(Z.tT))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),s})();var C=m(8180),R=m(9229),h=m(8845),$=m(553);function z(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"div",10),e._UZ(1,"img",11),e.TgZ(2,"div",12)(3,"button",13),e.NdJ("click",function(){const i=e.CHM(o).$implicit,a=e.oxw(2);return e.KtG(a.setMainPhoto(i))}),e._uU(4,"Main"),e.qZA(),e.TgZ(5,"button",14),e.NdJ("click",function(){const i=e.CHM(o).$implicit,a=e.oxw(2);return e.KtG(a.deletePhoto(i.id))}),e._UZ(6,"i",15),e.qZA()()()}if(2&r){const o=s.$implicit;e.xp6(1),e.s9C("src",o.url,e.LSH),e.xp6(2),e.Q6J("disabled",o.isMain)("ngClass",o.isMain?"btn-success active":"btn-outline-success"),e.xp6(2),e.Q6J("disabled",o.isMain)}}function j(r,s){if(1&r&&(e.TgZ(0,"div",8),e.YNc(1,z,7,4,"div",9),e.qZA()),2&r){const o=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==o.member?null:o.member.photos)}}function X(r,s){if(1&r&&(e.TgZ(0,"td",28),e._uU(1),e.ALo(2,"number"),e.qZA()),2&r){const o=e.oxw().$implicit;e.xp6(1),e.hij("",e.xi3(2,1,(null==o||null==o.file?null:o.file.size)/1024/1024,".2")," MB")}}function V(r,s){if(1&r&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()(),e.YNc(4,X,3,4,"td",27),e.qZA()),2&r){const o=s.$implicit,t=e.oxw(2);e.xp6(3),e.Oqu(null==o||null==o.file?null:o.file.name),e.xp6(1),e.Q6J("ngIf",null==t.uploader||null==t.uploader.options?null:t.uploader.options.isHTML5)}}const W=function(r){return{width:r}};function ee(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"div",16)(1,"h3"),e._uU(2,"Upload queue"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"table",17)(6,"thead")(7,"tr")(8,"th",18),e._uU(9,"Name"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Size"),e.qZA()()(),e.TgZ(12,"tbody"),e.YNc(13,V,5,2,"tr",19),e.qZA()(),e.TgZ(14,"div")(15,"div"),e._uU(16," Queue progress: "),e.TgZ(17,"div",20),e._UZ(18,"div",21),e.qZA()(),e.TgZ(19,"button",22),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(null==n.uploader?null:n.uploader.uploadAll())}),e._UZ(20,"span",23),e._uU(21," Upload all "),e.qZA(),e.TgZ(22,"button",24),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(null==n.uploader?null:n.uploader.cancelAll())}),e._UZ(23,"span",25),e._uU(24," Cancel all "),e.qZA(),e.TgZ(25,"button",26),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(null==n.uploader?null:n.uploader.clearQueue())}),e._UZ(26,"span",15),e._uU(27," Remove all "),e.qZA()()()}if(2&r){const o=e.oxw();let t;e.xp6(4),e.hij("Queue length: ",null==o.uploader||null==o.uploader.queue?null:o.uploader.queue.length,""),e.xp6(9),e.Q6J("ngForOf",null==o.uploader?null:o.uploader.queue),e.xp6(5),e.Q6J("ngStyle",e.VKq(6,W,(null==o.uploader?null:o.uploader.progress)+"%")),e.xp6(1),e.Q6J("disabled",!(null!=o.uploader&&null!=(t=o.uploader.getNotUploadedItems())&&t.length)),e.xp6(3),e.Q6J("disabled",!(null!=o.uploader&&o.uploader.isUploading)),e.xp6(3),e.Q6J("disabled",!(null!=o.uploader&&null!=o.uploader.queue&&o.uploader.queue.length))}}const te=function(r){return{"nv-file-over":r}};let ne=(()=>{var r;class s{constructor(t,n){this.accountService=t,this.memberService=n,this.hasBaseDropZoneOver=!1,this.baseUrl=$.N.apiUrl,this.accountService.currentUser$.pipe((0,C.q)(1)).subscribe({next:i=>{i&&(this.user=i)}})}ngOnInit(){this.initiallizeUpLoader()}fileOverBase(t){this.hasBaseDropZoneOver=t}setMainPhoto(t){this.memberService.setMainPhoto(t.id).subscribe({next:()=>{this.user&&this.member&&(this.user.photoUrl=t.url,this.accountService.setCurrentUser(this.user),this.member.photoUrl=t.url,this.member.photos.forEach(n=>{n.isMain&&(n.isMain=!1),n.id===t.id&&(n.isMain=!0)}))}})}deletePhoto(t){this.memberService.deletePhoto(t).subscribe({next:n=>{this.member&&(this.member.photos=this.member.photos.filter(i=>i.id!==t))}})}initiallizeUpLoader(){this.uploader=new h.bA({url:this.baseUrl+"user/add-photo",authToken:"Bearer "+this.user?.token,isHTML5:!0,allowedFileType:["image"],removeAfterUpload:!0,autoUpload:!1,maxFileSize:10485760}),this.uploader.onAfterAddingFile=t=>{t.withCredentials=!1},this.uploader.onSuccessItem=(t,n,i,a)=>{if(n){const u=JSON.parse(n);this.member?.photos.push(u)}}}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(f.B),e.Y36(p.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-photo-editor"]],inputs:{member:"member"},decls:14,vars:8,consts:[["class","row mb-3",4,"ngIf"],[1,"row"],[1,"col-3"],["ng2FileDrop","",1,"card","bg-faded","p-3","text-center","mb-3","my-drop-zone",3,"ngClass","uploader","fileOver"],[1,"fa","fa-upload","fa-3x"],["type","file","ng2FileSelect","","multiple","",3,"uploader"],["type","file","ng2FileSelect","",3,"uploader"],["class","col-md-9","style","margin-bottom: 40px",4,"ngIf"],[1,"row","mb-3"],["class","col-2",4,"ngFor","ngForOf"],[1,"col-2"],["alt","photo of user",1,"img-thumbnail","mb-1",3,"src"],[1,"text-center"],[1,"btn","btn-sm",3,"disabled","ngClass","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],[1,"fa","fa-trash"],[1,"col-md-9",2,"margin-bottom","40px"],[1,"table"],["width","50%"],[4,"ngFor","ngForOf"],[1,"progress"],["role","progressbar",1,"progress-bar",3,"ngStyle"],["type","button",1,"btn","btn-success","btn-s",3,"disabled","click"],[1,"fa","fa-upload"],["type","button",1,"btn","btn-warning","btn-s",3,"disabled","click"],[1,"fa","fa-ban"],["type","button",1,"btn","btn-danger","btn-s",3,"disabled","click"],["nowrap","",4,"ngIf"],["nowrap",""]],template:function(t,n){1&t&&(e.YNc(0,j,2,1,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"Add photo"),e.qZA(),e.TgZ(5,"div",3),e.NdJ("fileOver",function(a){return n.fileOverBase(a)}),e._UZ(6,"i",4),e._uU(7," Drop photos zone "),e.qZA(),e._uU(8," Multiple "),e._UZ(9,"input",5)(10,"br"),e._uU(11," Single "),e._UZ(12,"input",6),e.qZA(),e.YNc(13,ee,28,8,"div",7),e.qZA()),2&t&&(e.Q6J("ngIf",n.member),e.xp6(5),e.Q6J("ngClass",e.VKq(6,te,n.hasBaseDropZoneOver))("uploader",n.uploader),e.xp6(4),e.Q6J("uploader",n.uploader),e.xp6(3),e.Q6J("uploader",n.uploader),e.xp6(1),e.Q6J("ngIf",null==n.uploader||null==n.uploader.queue?null:n.uploader.queue.length))},dependencies:[c.mk,c.sg,c.O5,c.PC,h.GN,h.C6,c.JJ],styles:[".nv-file-over[_ngcontent-%COMP%]{border:dotted 3px red}input[type=file][_ngcontent-%COMP%]{color:transparent}"]}),s})();const oe=["editForm"];function re(r,s){1&r&&(e.TgZ(0,"div",25)(1,"p")(2,"strong"),e._uU(3,"Information: "),e.qZA(),e._uU(4," You have made change. Any unsaved changed will be lost"),e.qZA()())}function ie(r,s){if(1&r){const o=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"h1"),e._uU(3,"Your Profile"),e.qZA()(),e.TgZ(4,"div",3),e.YNc(5,re,5,0,"div",4),e.qZA(),e.TgZ(6,"div",2)(7,"div",5),e._UZ(8,"img",6),e.TgZ(9,"div",7)(10,"div")(11,"strong"),e._uU(12,"Location:"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA()(),e.TgZ(15,"div")(16,"strong"),e._uU(17,"Age:"),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.qZA()(),e.TgZ(20,"div")(21,"strong"),e._uU(22,"Member since:"),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.ALo(25,"date"),e.qZA()()()(),e.TgZ(26,"div",8)(27,"button",9),e._uU(28,"Save Changes"),e.qZA()()(),e.TgZ(29,"div",3)(30,"tabset",10)(31,"tab",11)(32,"form",12,13),e.NdJ("ngSubmit",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.updateMember())}),e.TgZ(34,"h4",14),e._uU(35,"Description"),e.qZA(),e.TgZ(36,"textarea",15),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.member.introduction=n)}),e.qZA(),e.TgZ(37,"h4",14),e._uU(38,"Looking for"),e.qZA(),e.TgZ(39,"textarea",16),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.member.lockingFor=n)}),e.qZA(),e.TgZ(40,"h4",14),e._uU(41,"Interests"),e.qZA(),e.TgZ(42,"textarea",17),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.member.interests=n)}),e.qZA(),e.TgZ(43,"h4",14),e._uU(44,"Location Details: "),e.qZA(),e.TgZ(45,"div",18)(46,"label",19),e._uU(47,"City: "),e.qZA(),e.TgZ(48,"input",20),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.member.city=n)}),e.qZA(),e.TgZ(49,"label",21),e._uU(50,"Country: "),e.qZA(),e.TgZ(51,"input",22),e.NdJ("ngModelChange",function(n){e.CHM(o);const i=e.oxw();return e.KtG(i.member.country=n)}),e.qZA()()()(),e.TgZ(52,"tab",23),e._UZ(53,"app-photo-editor",24),e.qZA()()()()}if(2&r){const o=e.MAs(33),t=e.oxw();e.xp6(5),e.Q6J("ngIf",o.dirty),e.xp6(3),e.s9C("src",t.member.photoUrl||"./assets/user.png",e.LSH),e.s9C("alt",t.member.knownAs),e.xp6(6),e.AsE("",t.member.city,", ",t.member.country,""),e.xp6(5),e.Oqu(t.member.age),e.xp6(5),e.Oqu(e.xi3(25,15,t.member.created,"dd MMM yyyy")),e.xp6(3),e.Q6J("disabled",!o.dirty),e.xp6(4),e.MGl("heading","About ",t.member.knownAs,""),e.xp6(5),e.Q6J("ngModel",t.member.introduction),e.xp6(3),e.Q6J("ngModel",t.member.lockingFor),e.xp6(3),e.Q6J("ngModel",t.member.interests),e.xp6(6),e.Q6J("ngModel",t.member.city),e.xp6(3),e.Q6J("ngModel",t.member.country),e.xp6(2),e.Q6J("member",t.member)}}const se=[{path:"",component:P},{path:"edit",component:(()=>{var r;class s{unloadNotification(t){t.returnValue=!0}constructor(t,n,i){this.accountSerive=t,this.memberSerive=n,this.toaster=i,this.user=null,this.accountSerive.currentUser$.pipe((0,C.q)(1)).subscribe({next:a=>this.user=a})}ngOnInit(){this.loadMember()}loadMember(){this.user&&this.memberSerive.getMember(this.user.username).subscribe({next:t=>this.member=t})}updateMember(){this.memberSerive.updateMember(this.editForm?.value).subscribe({next:t=>{this.toaster.success("Profile update successfully"),this.editForm?.reset(this.member)}})}}return(r=s).\u0275fac=function(t){return new(t||r)(e.Y36(f.B),e.Y36(p.Z),e.Y36(R._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-member-edit"]],viewQuery:function(t,n){if(1&t&&e.Gf(oe,5),2&t){let i;e.iGM(i=e.CRH())&&(n.editForm=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("beforerunload",function(a){return n.unloadNotification(a)},!1,e.Jf7)},decls:1,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-4"],[1,"col-8"],["class","alert alert-info pb-0",4,"ngIf"],[1,"card"],[1,"card-img-top","img-thumbnail",3,"src","alt"],[1,"card-body"],[1,"card-footer"],["type","submit","form","editForm",1,"btn","btn-success","col-12",3,"disabled"],[1,"member-tabset"],[3,"heading"],["id","editForm",3,"ngSubmit"],["editForm","ngForm"],[1,"mt-2"],["name","introduction","rows","6",1,"form-control",3,"ngModel","ngModelChange"],["name","lockingFor","rows","6",1,"form-control",3,"ngModel","ngModelChange"],["name","interests","rows","6",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row","align-items-center"],["for","city"],["type","text","name","city",1,"form-control","mx-2",3,"ngModel","ngModelChange"],["for","country"],["type","text","name","country",1,"form-control","mx-2",3,"ngModel","ngModelChange"],["heading","Edit photos"],[3,"member"],[1,"alert","alert-info","pb-0"]],template:function(t,n){1&t&&e.YNc(0,ie,54,18,"div",0),2&t&&e.Q6J("ngIf",n.member)},dependencies:[c.O5,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F,d.wW,d.AH,ne,c.uU],styles:[".img-thumbnail[_ngcontent-%COMP%]{margin:25px;width:85%;height:85%}.card-body[_ngcontent-%COMP%]{padding:0 25px}.card-footer[_ngcontent-%COMP%]{padding:10px 15px;background-color:#fff;border-top:none}"]}),s})(),canDeactivate:[r=>{const s=(0,e.f3M)(B);return!r.editForm?.dirty||s.confirm()}]},{path:":username",component:Y,resolve:{member:(r,s)=>(0,e.f3M)(p.Z).getMember(r.paramMap.get("username"))}}];let ae=(()=>{var r;class s{}return(r=s).\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.ez,b.Bz.forChild(se),b.Bz]}),s})()}}]);