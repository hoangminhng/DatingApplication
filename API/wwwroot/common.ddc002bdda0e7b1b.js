"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[592],{3613:(M,b,n)=>{n.d(b,{Z:()=>m});var e=n(553),g=n(8180),d=n(2096),h=n(7398);class p{constructor(r){this.minAge=18,this.maxAge=99,this.pageNumber=1,this.pageSize=5,this.orderBy="lastActive",this.gender="female"===r.gender?"male":"female"}}var l=n(5227),u=n(9468),v=n(9862),f=n(7783);let m=(()=>{var o;class r{constructor(t,a){this.http=t,this.accountService=a,this.baseUrl=e.N.apiUrl,this.members=[],this.memberCache=new Map,this.accountService.currentUser$.pipe((0,g.q)(1)).subscribe({next:s=>{s&&(this.userParams=new p(s),this.user=s)}})}getUserParams(){return this.userParams}setUserParams(t){this.userParams=t}resetUserParams(){if(this.user)return this.userParams=new p(this.user),this.userParams}getMembers(t){const a=this.memberCache.get(Object.values(t).join("-"));if(a)return(0,d.of)(a);let s=(0,l.r)(t.pageNumber,t.pageSize);return s=s.append("minAge",t.minAge),s=s.append("maxAge",t.maxAge),s=s.append("gender",t.gender),s=s.append("orderBy",t.orderBy),(0,l.n)(this.baseUrl+"user",s,this.http).pipe((0,h.U)(c=>(this.memberCache.set(Object.values(t).join("-"),c),c)))}getMember(t){const a=[...this.memberCache.values()].reduce((s,c)=>s.concat(c.result),[]).find(s=>s.userName===t);return a?(0,d.of)(a):this.http.get(this.baseUrl+"user/"+t)}updateMember(t){return this.http.put(this.baseUrl+"user",t).pipe((0,h.U)(()=>{const a=this.members.indexOf(t);this.members[a]={...this.members[a],...t}}))}setMainPhoto(t){return this.http.put(this.baseUrl+"user/set-main-photo/"+t,{})}deletePhoto(t){return this.http.delete(this.baseUrl+"user/delete-photo/"+t)}addLike(t){return this.http.post(this.baseUrl+"likes/"+t,{})}getLikes(t,a,s){let c=(0,l.r)(a,s);return c=c.append("predicate",t),(0,l.n)(this.baseUrl+"likes",c,this.http)}}return(o=r).\u0275fac=function(t){return new(t||o)(u.LFG(v.eN),u.LFG(f.B))},o.\u0275prov=u.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),r})()},6241:(M,b,n)=>{n.d(b,{a:()=>f});var e=n(9468),g=n(3613),d=n(9229),h=n(3949),p=n(6814),l=n(2423);const u=function(){return{tab:"Messages"}};function v(m,o){if(1&m){const r=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"img",3),e.TgZ(3,"ul",4)(4,"li",5)(5,"button",6),e._UZ(6,"i",7),e.qZA()(),e.TgZ(7,"li",5)(8,"button",8),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.addLike(t.member))}),e._UZ(9,"i",9),e.qZA()(),e.TgZ(10,"li",5)(11,"button",10),e._UZ(12,"i",11),e.qZA()()()(),e.TgZ(13,"div",12)(14,"h6",13)(15,"span"),e.ALo(16,"async"),e._UZ(17,"i",14),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"p",15),e._uU(20),e.qZA()()()}if(2&m){const r=e.oxw();let i;e.xp6(2),e.s9C("src",r.member.photoUrl||"./assets/user.png",e.LSH),e.s9C("alt",r.member.knownAs),e.xp6(3),e.MGl("routerLink","/members/",r.member.userName,""),e.xp6(6),e.MGl("routerLink","/members/",r.member.userName,""),e.Q6J("queryParams",e.DdM(12,u)),e.xp6(4),e.ekj("is-online",null==(i=e.lcZ(16,10,r.presenceService.onlineUser$))?null:i.includes(r.member.userName)),e.xp6(3),e.AsE(" ",r.member.knownAs,", ",r.member.age," "),e.xp6(2),e.Oqu(r.member.city)}}let f=(()=>{var m;class o{constructor(i,t,a){this.memberService=i,this.toastr=t,this.presenceService=a}ngOnInit(){}addLike(i){this.memberService.addLike(i.userName).subscribe({next:()=>{this.toastr.success("You have liked "+i.knownAs)}})}}return(m=o).\u0275fac=function(i){return new(i||m)(e.Y36(g.Z),e.Y36(d._W),e.Y36(h.Q))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-member-card"]],inputs:{member:"member"},decls:1,vars:1,consts:[["class","card mb-4",4,"ngIf"],[1,"card","mb-4"],[1,"card-img-wrapper"],["loading","lazy",1,"card-img-top",3,"src","alt"],[1,"list-inline","member-icon","animate","text-center"],[1,"list-inline-item"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-user"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-heart"],[1,"btn","btn-primary",3,"routerLink","queryParams"],[1,"fa","fa-envelope"],[1,"card-body","p-1"],[1,"card-title","text-center","mb-1"],[1,"fa","fa-user","me-2"],[1,"card-text","text-muted","text-center"]],template:function(i,t){1&i&&e.YNc(0,v,21,13,"div",0),2&i&&e.Q6J("ngIf",t.member)},dependencies:[p.O5,l.rH,p.Ov],styles:[".card:hover img{transform:scale(1.2);transition-duration:.5s;transition-timing-function:ease-out;opacity:.7}.card img{transform:scale(1);transition-duration:.5s;transition-timing-function:ease-out}.card-img-wrapper{overflow:hidden;position:relative}.member-icon{position:absolute;bottom:-30%;left:0;right:0;margin-left:auto;margin-right:auto}.card-img-wrapper:hover .member-icon{bottom:0;opacity:1}.animate{transition:all .3s ease-in-out}@keyframes fa-blink{0%{opacity:1}to{opacity:.4}}.is-online{animation:fa-blink 1.5s linear infinite;color:#01bd2a}\n"],encapsulation:2}),o})()}}]);